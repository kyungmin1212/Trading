## Table of Contents
- [내 기준 백테스팅시 기본 고려 사항](#1)
- [골든크로스 데드크로스 이용 백테스팅](#2)
- [마틴게일 베팅법을 응용한 매매방법](#3)

---

## #1

### 내 기준 백테스팅시 주의 사항

- 이동평균선이나 여러 지표들을 계산할때는 현재 타임스텝의 종가에 따라 지표들의 값들이 실시간으로 변화함 -> 백테스팅을 구현할시에 현재 타임스텝의 저가에서부터 고가까지 값들이 변화하는데 그 값들에 따라 지표들의 값들을 매번 계산하고 하면 정확한 타점을 계산하기가 번거로움

- 따라서 여러 지표들을 게산할때는 전 타임스텝까지의 값을 이용하여 계산하고, 현재 타임스텝의 저가에서부터 고가까지 모두 고려해 내가 원하는 특정 값을 넘어사는 타이밍이 있다면 그 가격에 매수 또는 매도하도록 설정

- 또한 실시간 매매할때는 현재 타임스텝에서의 종가가 계속해서 변화하므로 내가 원하는 지점을 여러번 터치해서 매수 매도가 반복적으로 수행될수가 있음. 백테스팅에서는 저가에서부터 고가까지 내가 원하는 가격이 몇번 왔다갔다 했는지 틱데이터가 아니라면 정확하게 알수가 없음 -> 따라서 실시간 매매할때도 그 타임스텝에서 내가 원하는 가격에 한번 도달하면 그 타임스텝에서는 매수매도를 잠깐 쉬고 다음 타임스텝에서 매수매도를 하도록 설정하기(백테스팅과 최대한 유사하게 설정하기 위함)

- 하지만 위와 같이 설정하게 된다면 한 타임스텝의 가격 변동폭이 클경우 매수 매도 조건을 동시에 만족할 경우가 발생하게 되는데 무조건 먼저 존재하는것 먼저 체결하고 그 타임스텝은 매수매도 쉴것. 백테스팅에서는 이와 같은 경우 어떤것이 먼저오는지 알수가 없음 같은 타임스텝이라면 저가 고가만 나오기때문에 어떤것이 먼저 도달한지 알수 없음. 따라서 이럴경우 백테스팅에서는 매수만 먼저하는걸로 설정. 이 경우는 백테스팅과 실매매의 어쩔수 없는 차이라고 생각하기

- 매매조건에 따라서 1분봉같은 경우는 조건을 만족하는 경우가 연속적으로 생성될수가 있음. 이럴 경우 1분단위로 한번 open 하면 n분 동안은 open은 하지 못하게 하는 방법등을 설정해둘수 있음. 이 n 또한 tuning 으로 설정하는 값

---

## #2

### 골든크로스 데드크로스 이용 백테스팅
- 타임프레임 : 15분봉
- 매매 기법 : 골든크로스,데드크로스
- 사용 지표 : 이동평균선
- 변수의 수 : 2개
    - 중기 추세 : 50 이동평균선
    - 장기 추세 : 200 이동평균선
- 매수 규칙
    - 매수 신호
        - 중기 추세 > 장기 추세
    - 매수 시점
        - 매수 신호가 발생한 15분봉 다음봉이 생성될때 바로 매수
    - 매도 시점
        - 이익이나 손실에 관계없이 중기 추세 < 장기 추세가 된다면 매도
- 매도 규칙
    - 매도 신호
        - 중기 추세 < 장기 추세
    - 매도 시점
        - 매도 신호가 발생한 15분봉 다음봉이 생성될때 바로 매도
    - 매수 시점
        - 이익이나 손실에 관계없이 중기 추세 > 장기 추세가 된다면 매도

- 코드
    - https://github.com/kyungmin1212/Trading/blob/main/code/ma_backtest.ipynb

- 결과
    - 상승이나 하락의 방향성이 결정되어져 있을 경우는 이득을 봄
    - 하지만 횡보장에서는 중기 추세선과 장기 추세선의 크로스가 나타나는 경우가 빈번하여 추세를 따라가서 수익을 크게 본다기 보다는 오르면 바로 하락하고 내리면 바로 상승하는 경우가 많아 손해가 점점 커짐
    - 이평선 거래만으로는 횡보장에서 손해를 보게 됨. 단, 상승추세나 하락추세가 결정되어져 있다면 쓸만한 전략

#### References

---

## #3

### 마틴게일 베팅법을 응용한 매매방법
- 질때마다 2배의 금액으로 배팅을 하면 결국에는 언젠가는 따게된다는 방법
- 돈만 많다면 무조건적으로 수익을 볼 수있는 방법
- 하지만 수익률이 그렇게 좋지는 않음.
- BTC/USDT 기준 first_open_coin_amount = 0.00001 로 포지션을 처음 open 한다고 가정했을때 2020년부터 수익률은 총 60.76755633142815 (0.5프로 오르면 매도, 3프로 내리면 추가 매수)
- 코드
    - https://github.com/kyungmin1212/Trading/blob/main/code/martingale_backtest.ipynb